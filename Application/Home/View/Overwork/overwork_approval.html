<include file="Public/header" />
<style type="text/css">
.column-title{
  text-align: center;
}
</style>
<!-- 审批主体 -->
<div class="right_col" role="main">
    <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>{$Think.session.admin.user_office} 加班预报审批</h2>
                	<div class="clearfix"></div>
                </div>
                <div class="x_content">     
                  	<table class="table table-striped jambo_table bulk_action" style="text-align:center;">
                        <thead>
                            <tr class="headings">
	                            <th class="column-title">序号</th>
	                            <th class="column-title">姓名</th>
	                            <th class="column-title">加班类别</th>
	                            <th class="column-title">加班开始时间</th>
	                            <th class="column-title">加班结束时间</th>
	                            <th class="column-title">加班时长</th>
	                            <th class="column-title">加班内容</th>
	                            <th class="column-title">状态</th>
	                            <th class="column-title">操作</th>    
                          	</tr>
                        </thead>
                        <tbody>                      
	                        <volist name="data" id="vo">
		                        <tr class="even pointer">
		                            <td class=" ">{$i}</td>
		                            <td class=" ">{$vo.name}</td>
		                            <td class=" ">{$vo.overworktype}</td>
		                            <td class=" ">{$vo.overworkstarttime}</td>
		                            <td class=" ">{$vo.overworkendtime}</td>
		                            <td class=" ">{$vo.overworktotaltime}</td>
		                            <td class=" "  style="text-align: left;">{$vo.overworkcontent}</td>
		                            <td class=" ">{$vo.chief_confirm}</td>
		                            <td class=" "><a id="{$vo.id}" class="btn btn-warning btn-sm" onclick="overworkRetreat(this)" data-toggle="modal"  data-target="#retreat">退回</a></td>
		                        </tr>
	                        </volist>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 审批主体完 -->




<div class="modal fade" id="retreat" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="float: right; border: 1px solid #333;"> 
    <div class="modal-dialog">
      	<div class="modal-content">
       		<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            	&times;
        		</button>
        		<h4 class="modal-title" id="myModalLabel">
           			编辑人员：
        		</h4>
       		</div>
       	<!--编辑主体 -->
      		<div class="modal-body">
		        <table class="table">
		          	<tr>
		            	<th>工号:</th>
		            	<td><input type="hidden" id="text0" class="form-control">
		          		<input type="text" id="text2" name="text[]" class="form-control" disabled="disabled"></td>
		          	</tr>
		          	<tr>
		            	<th>人员名称:</th>
		          		<td><input type="text" id="text1" name="text[]" class="form-control" disabled="disabled"></td>
		          	</tr>
		          	<tr>
		            	<th>科室:</th>
		            	<td><input type="text" id="text3" name="text[]" class="form-control"></td>
		          	</tr>
		          	<tr>
		            	<th>上级:</th>
		            	<td><select id="leader" class="form-control">
		              			<option value="">默认</option>
		              			<volist name="leader" id="l">
		               			<option value="{$l.username}">{$l.username}</option>
		              			</volist>
		            		</select>
		            	</td>
		          	</tr>
		          	<tr>
		            	<th>岗位:</th>
		            	<td><input type="text" id="text4" name="text[]" class="form-control"></td>
		          	</tr>
		          	<tr>
		            	<th>等级:</th>
		            	<td><select id="level" class="form-control">
				              	<option value="">默认</option>
				              	<option value="3">科员</option>
				              	<option value="4">科长</option>
				              	<option value="5">部长</option>
				              	<option value="7">VSE</option>
				              	<option value="8">项目经理</option>
			            	</select>
			            </td>
		          	</tr>
		          	<tr>
		            	<th>类型:</th>
		            	<td><select id="typee" class="form-control">
		              			<option value="">默认</option>		              
				              	<option value="职能员工">职能员工</option>
				              	<option value="专业员工">专业员工</option>
				              	<option value="院长">院长</option>
				              	<option value="科长">科长</option>
				              	<option value="VSE">VSE</option>
				              	<option value="项目经理">项目经理</option>
				              	<option value="副部长">副部长</option>
		            		</select>
		            	</td>
		         	</tr>		          
         		</table>
         		<input type="button" id="sub-mod" class="btn-block btn-lg btn-primary" value="提交">
          	</div>
      	</div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>



<include file="Public/foot" />
<!-- Datatables -->
<script src="__PUBLIC__/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="__PUBLIC__/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<!-- Datatables -->
<script>
	function overworkRetreat(tt){
       var tr1 = tt.parentNode.parentNode;  
       for(var i=0;i<=4;i++)
       {
            document.getElementById("text"+i).value = tr1.cells[i].innerText;
       }
       var action = "leader";
       var level=tr1.cells[6].innerText;
       var authority=tr1.cells[8].innerText;
        $.ajax({
        type:"POST",
        url:action,
        dataType:"json",
        data:{"level":level},
        //async : false,
        success:function(data){
             var data = data.toString();
             var data = data.split(",");
             var obj = document.getElementById("leader"); // 获取select对象
             obj.options.length = 0; // 删除原有选项
             obj.add(new Option('默认','')); 
             for (x in data){
                 obj.add(new Option(data[x],data[x])); // 添加选项
              }
          
        }
      });
    }
</script>
  